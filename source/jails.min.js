!function(a,b){"function"==typeof define&&define.amd?define(["jails"],b):"object"==typeof exports?module.exports=b(require("jails")):a.returnExports=b(a.Jails)}(this,function(){function h(a,b,c,d,e){var f=d["jails-"+c];if(!f){d["jails-"+c]=!0;var g=new a(c,d);b&&b.apply(g,[d,e]),g.init&&g.init()}}function i(b){function e(d){d in a.components&&h(m,a.components[d],d,b,c[d]||{})}var c=j(b),d=b.getAttribute("data-component").replace(/\s/,"").split(/\,/);q(d,e)}function j(a){var c,d,b={};return c=a.previousSibling,c=c&&8==c.nodeType?c:c?c.previousSibling:null,c&&8==c.nodeType&&(d=c.data.replace(/[\n\t]/g,"").replace(/\@([a-zA-z0-9-]*)\(([^@]*)\)/g,function(a,c,d){b[c]=new Function("return "+d)()})),b}function k(b){return function(c){var e;e=c.getAttribute("data-"+b),h(n,a[b+"s"][e],e,c,d)}}function l(b,c){function f(a){if(a.detail){var b=r(a.detail),c=d[b.shift()];c&&c.apply(d,b)}a.stopPropagation()}var d=this,e={};this.name=b,this.trigger=a.events.trigger,a.events.on(c,"execute",f),this.off=function(b,d){a.events.off(c,b,e[d])},this.emit=function(d,e){a.events.trigger(c,b+":"+d,e)},this.on=function(b,d,f){f||(f=d,d=null),e[f]=function(a){if(!d)return f.call(c,a);for(var b=a.target;b&&b!=c&&b.parentNode;){if(b.matches?b.matches(d):s(b,d)){f.call(b,a);break}b=b.parentNode}},a.events.on(c,b,e[f])}}function m(a,b){l.apply(this,arguments)}function n(b,d){l.apply(this,arguments),this.publish=e.publish,this.subscribe=e.subscribe,this.listen=function(b,c){a.events.on(d,b,function(a){c.call(a.target,a,a.detail)})},this.x=function(b){return function(){var e=c.call(arguments);q(d.querySelectorAll(b),function(b){a.events.trigger(b,"execute",e)})}}}function o(b,c){return function(d,e){return a[b][d]=e,function(a,b){c.apply(this,[d,a]),e.apply(this,[a,b])}}}function p(){var a={},b={};return{subscribe:function(){var d=c.call(arguments),e=d[0],f=d[1],g=this;e in b&&a[e]?(a[e].push(f),g.publish.apply(null,[e].concat(b[e]))):(a[e]=a[e]||[],a[e].push(f))},publish:function(){var d=c.call(arguments),e=d.shift();a[e]=a[e]||[],a[e].length?q(a[e],function(a){a&&a.apply(this,d)}):b[e]=d}}}function q(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function r(a){var b=function(){};return b.prototype=a,new b}function s(a,b){for(var c=a.parentNode.querySelectorAll(b),d=c.length,e=0;d>e;e++)if(c[e]===a)return!0;return!1}function t(){function c(a,b){var c=document.createEvent(a);return b=b||{},c.initEvent(a,b.bubbles||!1,b.cancelable||!1,b.detail||null),c}var a=function(){var a=!1,b=document.lastChild,c=document.createElement("a"),d=function(){a=!0};return c.href="#",c.addEventListener?c.addEventListener("focusin",d):c.onfocusin=d,b.appendChild(c).focus(),b.removeChild(c),a}(),b=function(){try{var a=new CustomEvent("c",{detail:{foo:"b"}});if("c"===a.type&&"b"===a.detail.foo)return CustomEvent}catch(b){return function(a,b){var c=document.createEvent("CustomEvent");return b=b||{},c.initCustomEvent(a,b.bubbles||!1,b.cancelable||!1,b.detail||null),c}}}();return{on:function(){return a?function(a,b,c){var d="focus"==b?"focusin":"blur"==b?"focusout":b;a.addEventListener(d,c,!1)}:function(a,b,c){a.addEventListener(b,c,"focus"==b||"blur"==b)}}(),off:function(a,b,c){a.removeEventListener(b,c,!1)},trigger:function(a,d,e){try{a.dispatchEvent(new c(d,{bubbles:!0,detail:e}))}catch(f){a.dispatchEvent(new b(d,{bubbles:!0,detail:e}))}}}}var a,c,d={},e=p(),f=document.documentElement;c=Array.prototype.slice,a={apps:{},controllers:{},components:{},events:t(),app:o("apps",n),controller:o("controllers",n),component:o("components",m),publish:e.publish,subscribe:e.subscribe,start:function(a){g.scan(a),f.className=f.className.replace("jls-ready","")+" jls-ready"},refresh:function(a){g.scan(a)},data:function(){return d},scanner:function(){return g},render:function(b,c){g.scan(b,function(b){a.events.trigger(b,"execute","destroy")}),b.innerHTML=c}};var g={scan:function(a,b){var c,d,f,e=this.entities;f=a||document;for(var g in e)c=e[g],d=f.querySelectorAll(c.selector),q(d,b||c.method)},entities:{components:{selector:"[data-component]",method:i},controllers:{selector:"[data-controller]",method:k("controller")},app:{selector:"[data-app]",method:k("app")}}};return a});
